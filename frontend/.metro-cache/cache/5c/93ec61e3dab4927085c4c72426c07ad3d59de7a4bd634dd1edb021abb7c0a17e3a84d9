{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  let SyncReader = module.exports = function (buffer) {\n    this._buffer = buffer;\n    this._reads = [];\n  };\n  SyncReader.prototype.read = function (length, callback) {\n    this._reads.push({\n      length: Math.abs(length),\n      // if length < 0 then at most this length\n      allowLess: length < 0,\n      func: callback\n    });\n  };\n  SyncReader.prototype.process = function () {\n    // as long as there is any data and read requests\n    while (this._reads.length > 0 && this._buffer.length) {\n      let read = this._reads[0];\n      if (this._buffer.length && (this._buffer.length >= read.length || read.allowLess)) {\n        // ok there is any data so that we can satisfy this request\n        this._reads.shift(); // == read\n\n        let buf = this._buffer;\n        this._buffer = buf.slice(read.length);\n        read.func.call(this, buf.slice(0, read.length));\n      } else {\n        break;\n      }\n    }\n    if (this._reads.length > 0) {\n      return new Error(\"There are some read requests waitng on finished stream\");\n    }\n    if (this._buffer.length > 0) {\n      return new Error(\"unrecognised content at end of stream\");\n    }\n  };\n});","lineCount":38,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"SyncReader"],[4,16,3,14],[4,19,3,18,"module"],[4,25,3,24],[4,26,3,25,"exports"],[4,33,3,32],[4,36,3,35],[4,46,3,45,"buffer"],[4,52,3,51],[4,54,3,53],[5,4,4,2],[5,8,4,6],[5,9,4,7,"_buffer"],[5,16,4,14],[5,19,4,17,"buffer"],[5,25,4,23],[6,4,5,2],[6,8,5,6],[6,9,5,7,"_reads"],[6,15,5,13],[6,18,5,16],[6,20,5,18],[7,2,6,0],[7,3,6,2],[8,2,8,0,"SyncReader"],[8,12,8,10],[8,13,8,11,"prototype"],[8,22,8,20],[8,23,8,21,"read"],[8,27,8,25],[8,30,8,28],[8,40,8,38,"length"],[8,46,8,44],[8,48,8,46,"callback"],[8,56,8,54],[8,58,8,56],[9,4,9,2],[9,8,9,6],[9,9,9,7,"_reads"],[9,15,9,13],[9,16,9,14,"push"],[9,20,9,18],[9,21,9,19],[10,6,10,4,"length"],[10,12,10,10],[10,14,10,12,"Math"],[10,18,10,16],[10,19,10,17,"abs"],[10,22,10,20],[10,23,10,21,"length"],[10,29,10,27],[10,30,10,28],[11,6,10,30],[12,6,11,4,"allowLess"],[12,15,11,13],[12,17,11,15,"length"],[12,23,11,21],[12,26,11,24],[12,27,11,25],[13,6,12,4,"func"],[13,10,12,8],[13,12,12,10,"callback"],[14,4,13,2],[14,5,13,3],[14,6,13,4],[15,2,14,0],[15,3,14,1],[16,2,16,0,"SyncReader"],[16,12,16,10],[16,13,16,11,"prototype"],[16,22,16,20],[16,23,16,21,"process"],[16,30,16,28],[16,33,16,31],[16,45,16,43],[17,4,17,2],[18,4,18,2],[18,11,18,9],[18,15,18,13],[18,16,18,14,"_reads"],[18,22,18,20],[18,23,18,21,"length"],[18,29,18,27],[18,32,18,30],[18,33,18,31],[18,37,18,35],[18,41,18,39],[18,42,18,40,"_buffer"],[18,49,18,47],[18,50,18,48,"length"],[18,56,18,54],[18,58,18,56],[19,6,19,4],[19,10,19,8,"read"],[19,14,19,12],[19,17,19,15],[19,21,19,19],[19,22,19,20,"_reads"],[19,28,19,26],[19,29,19,27],[19,30,19,28],[19,31,19,29],[20,6,21,4],[20,10,22,6],[20,14,22,10],[20,15,22,11,"_buffer"],[20,22,22,18],[20,23,22,19,"length"],[20,29,22,25],[20,34,23,7],[20,38,23,11],[20,39,23,12,"_buffer"],[20,46,23,19],[20,47,23,20,"length"],[20,53,23,26],[20,57,23,30,"read"],[20,61,23,34],[20,62,23,35,"length"],[20,68,23,41],[20,72,23,45,"read"],[20,76,23,49],[20,77,23,50,"allowLess"],[20,86,23,59],[20,87,23,60],[20,89,24,6],[21,8,25,6],[22,8,26,6],[22,12,26,10],[22,13,26,11,"_reads"],[22,19,26,17],[22,20,26,18,"shift"],[22,25,26,23],[22,26,26,24],[22,27,26,25],[22,28,26,26],[22,29,26,27],[24,8,28,6],[24,12,28,10,"buf"],[24,15,28,13],[24,18,28,16],[24,22,28,20],[24,23,28,21,"_buffer"],[24,30,28,28],[25,8,30,6],[25,12,30,10],[25,13,30,11,"_buffer"],[25,20,30,18],[25,23,30,21,"buf"],[25,26,30,24],[25,27,30,25,"slice"],[25,32,30,30],[25,33,30,31,"read"],[25,37,30,35],[25,38,30,36,"length"],[25,44,30,42],[25,45,30,43],[26,8,32,6,"read"],[26,12,32,10],[26,13,32,11,"func"],[26,17,32,15],[26,18,32,16,"call"],[26,22,32,20],[26,23,32,21],[26,27,32,25],[26,29,32,27,"buf"],[26,32,32,30],[26,33,32,31,"slice"],[26,38,32,36],[26,39,32,37],[26,40,32,38],[26,42,32,40,"read"],[26,46,32,44],[26,47,32,45,"length"],[26,53,32,51],[26,54,32,52],[26,55,32,53],[27,6,33,4],[27,7,33,5],[27,13,33,11],[28,8,34,6],[29,6,35,4],[30,4,36,2],[31,4,38,2],[31,8,38,6],[31,12,38,10],[31,13,38,11,"_reads"],[31,19,38,17],[31,20,38,18,"length"],[31,26,38,24],[31,29,38,27],[31,30,38,28],[31,32,38,30],[32,6,39,4],[32,13,39,11],[32,17,39,15,"Error"],[32,22,39,20],[32,23,39,21],[32,79,39,77],[32,80,39,78],[33,4,40,2],[34,4,42,2],[34,8,42,6],[34,12,42,10],[34,13,42,11,"_buffer"],[34,20,42,18],[34,21,42,19,"length"],[34,27,42,25],[34,30,42,28],[34,31,42,29],[34,33,42,31],[35,6,43,4],[35,13,43,11],[35,17,43,15,"Error"],[35,22,43,20],[35,23,43,21],[35,62,43,60],[35,63,43,61],[36,4,44,2],[37,2,45,0],[37,3,45,1],[38,0,45,2],[38,3]],"functionMap":{"names":["<global>","module.exports","SyncReader.prototype.read","SyncReader.prototype.process"],"mappings":"AAA;mCCE;CDG;4BEE;CFM;+BGE;CH6B"},"hasCjsExports":true},"type":"js/module"}]}