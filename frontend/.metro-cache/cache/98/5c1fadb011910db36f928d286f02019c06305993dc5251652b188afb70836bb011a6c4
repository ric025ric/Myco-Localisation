{"dependencies":[{"name":"util","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":11,"index":26},"end":{"line":3,"column":26,"index":41}}],"key":"plO20G0zye191TqKMAMeOagk9EI=","exportNames":["*"],"imports":1}},{"name":"stream","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":13,"index":56},"end":{"line":4,"column":30,"index":73}}],"key":"ywjhWBPQUrHXIfwGsbgNg7Szt/A=","exportNames":["*"],"imports":1}},{"name":"./constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":16,"index":91},"end":{"line":5,"column":38,"index":113}}],"key":"3z43bJyk/UB4EKjDCOXTFak09do=","exportNames":["*"],"imports":1}},{"name":"./packer","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":13,"index":128},"end":{"line":6,"column":32,"index":147}}],"key":"rW9F33uljv30DdpIxXfK3KSAg2w=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  let util = require(_dependencyMap[0], \"util\");\n  let Stream = require(_dependencyMap[1], \"stream\");\n  let constants = require(_dependencyMap[2], \"./constants\");\n  let Packer = require(_dependencyMap[3], \"./packer\");\n  let PackerAsync = module.exports = function (opt) {\n    Stream.call(this);\n    let options = opt || {};\n    this._packer = new Packer(options);\n    this._deflate = this._packer.createDeflate();\n    this.readable = true;\n  };\n  util.inherits(PackerAsync, Stream);\n  PackerAsync.prototype.pack = function (data, width, height, gamma) {\n    // Signature\n    this.emit(\"data\", Buffer.from(constants.PNG_SIGNATURE));\n    this.emit(\"data\", this._packer.packIHDR(width, height));\n    if (gamma) {\n      this.emit(\"data\", this._packer.packGAMA(gamma));\n    }\n    let filteredData = this._packer.filterData(data, width, height);\n\n    // compress it\n    this._deflate.on(\"error\", this.emit.bind(this, \"error\"));\n    this._deflate.on(\"data\", function (compressedData) {\n      this.emit(\"data\", this._packer.packIDAT(compressedData));\n    }.bind(this));\n    this._deflate.on(\"end\", function () {\n      this.emit(\"data\", this._packer.packIEND());\n      this.emit(\"end\");\n    }.bind(this));\n    this._deflate.end(filteredData);\n  };\n});","lineCount":36,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"util"],[4,10,3,8],[4,13,3,11,"require"],[4,20,3,18],[4,21,3,18,"_dependencyMap"],[4,35,3,18],[4,46,3,25],[4,47,3,26],[5,2,4,0],[5,6,4,4,"Stream"],[5,12,4,10],[5,15,4,13,"require"],[5,22,4,20],[5,23,4,20,"_dependencyMap"],[5,37,4,20],[5,50,4,29],[5,51,4,30],[6,2,5,0],[6,6,5,4,"constants"],[6,15,5,13],[6,18,5,16,"require"],[6,25,5,23],[6,26,5,23,"_dependencyMap"],[6,40,5,23],[6,58,5,37],[6,59,5,38],[7,2,6,0],[7,6,6,4,"Packer"],[7,12,6,10],[7,15,6,13,"require"],[7,22,6,20],[7,23,6,20,"_dependencyMap"],[7,37,6,20],[7,52,6,31],[7,53,6,32],[8,2,8,0],[8,6,8,4,"PackerAsync"],[8,17,8,15],[8,20,8,19,"module"],[8,26,8,25],[8,27,8,26,"exports"],[8,34,8,33],[8,37,8,36],[8,47,8,46,"opt"],[8,50,8,49],[8,52,8,51],[9,4,9,2,"Stream"],[9,10,9,8],[9,11,9,9,"call"],[9,15,9,13],[9,16,9,14],[9,20,9,18],[9,21,9,19],[10,4,11,2],[10,8,11,6,"options"],[10,15,11,13],[10,18,11,16,"opt"],[10,21,11,19],[10,25,11,23],[10,26,11,24],[10,27,11,25],[11,4,13,2],[11,8,13,6],[11,9,13,7,"_packer"],[11,16,13,14],[11,19,13,17],[11,23,13,21,"Packer"],[11,29,13,27],[11,30,13,28,"options"],[11,37,13,35],[11,38,13,36],[12,4,14,2],[12,8,14,6],[12,9,14,7,"_deflate"],[12,17,14,15],[12,20,14,18],[12,24,14,22],[12,25,14,23,"_packer"],[12,32,14,30],[12,33,14,31,"createDeflate"],[12,46,14,44],[12,47,14,45],[12,48,14,46],[13,4,16,2],[13,8,16,6],[13,9,16,7,"readable"],[13,17,16,15],[13,20,16,18],[13,24,16,22],[14,2,17,0],[14,3,17,2],[15,2,18,0,"util"],[15,6,18,4],[15,7,18,5,"inherits"],[15,15,18,13],[15,16,18,14,"PackerAsync"],[15,27,18,25],[15,29,18,27,"Stream"],[15,35,18,33],[15,36,18,34],[16,2,20,0,"PackerAsync"],[16,13,20,11],[16,14,20,12,"prototype"],[16,23,20,21],[16,24,20,22,"pack"],[16,28,20,26],[16,31,20,29],[16,41,20,39,"data"],[16,45,20,43],[16,47,20,45,"width"],[16,52,20,50],[16,54,20,52,"height"],[16,60,20,58],[16,62,20,60,"gamma"],[16,67,20,65],[16,69,20,67],[17,4,21,2],[18,4,22,2],[18,8,22,6],[18,9,22,7,"emit"],[18,13,22,11],[18,14,22,12],[18,20,22,18],[18,22,22,20,"Buffer"],[18,28,22,26],[18,29,22,27,"from"],[18,33,22,31],[18,34,22,32,"constants"],[18,43,22,41],[18,44,22,42,"PNG_SIGNATURE"],[18,57,22,55],[18,58,22,56],[18,59,22,57],[19,4,23,2],[19,8,23,6],[19,9,23,7,"emit"],[19,13,23,11],[19,14,23,12],[19,20,23,18],[19,22,23,20],[19,26,23,24],[19,27,23,25,"_packer"],[19,34,23,32],[19,35,23,33,"packIHDR"],[19,43,23,41],[19,44,23,42,"width"],[19,49,23,47],[19,51,23,49,"height"],[19,57,23,55],[19,58,23,56],[19,59,23,57],[20,4,25,2],[20,8,25,6,"gamma"],[20,13,25,11],[20,15,25,13],[21,6,26,4],[21,10,26,8],[21,11,26,9,"emit"],[21,15,26,13],[21,16,26,14],[21,22,26,20],[21,24,26,22],[21,28,26,26],[21,29,26,27,"_packer"],[21,36,26,34],[21,37,26,35,"packGAMA"],[21,45,26,43],[21,46,26,44,"gamma"],[21,51,26,49],[21,52,26,50],[21,53,26,51],[22,4,27,2],[23,4,29,2],[23,8,29,6,"filteredData"],[23,20,29,18],[23,23,29,21],[23,27,29,25],[23,28,29,26,"_packer"],[23,35,29,33],[23,36,29,34,"filterData"],[23,46,29,44],[23,47,29,45,"data"],[23,51,29,49],[23,53,29,51,"width"],[23,58,29,56],[23,60,29,58,"height"],[23,66,29,64],[23,67,29,65],[25,4,31,2],[26,4,32,2],[26,8,32,6],[26,9,32,7,"_deflate"],[26,17,32,15],[26,18,32,16,"on"],[26,20,32,18],[26,21,32,19],[26,28,32,26],[26,30,32,28],[26,34,32,32],[26,35,32,33,"emit"],[26,39,32,37],[26,40,32,38,"bind"],[26,44,32,42],[26,45,32,43],[26,49,32,47],[26,51,32,49],[26,58,32,56],[26,59,32,57],[26,60,32,58],[27,4,34,2],[27,8,34,6],[27,9,34,7,"_deflate"],[27,17,34,15],[27,18,34,16,"on"],[27,20,34,18],[27,21,35,4],[27,27,35,10],[27,29,36,4],[27,39,36,14,"compressedData"],[27,53,36,28],[27,55,36,30],[28,6,37,6],[28,10,37,10],[28,11,37,11,"emit"],[28,15,37,15],[28,16,37,16],[28,22,37,22],[28,24,37,24],[28,28,37,28],[28,29,37,29,"_packer"],[28,36,37,36],[28,37,37,37,"packIDAT"],[28,45,37,45],[28,46,37,46,"compressedData"],[28,60,37,60],[28,61,37,61],[28,62,37,62],[29,4,38,4],[29,5,38,5],[29,6,38,6,"bind"],[29,10,38,10],[29,11,38,11],[29,15,38,15],[29,16,39,2],[29,17,39,3],[30,4,41,2],[30,8,41,6],[30,9,41,7,"_deflate"],[30,17,41,15],[30,18,41,16,"on"],[30,20,41,18],[30,21,42,4],[30,26,42,9],[30,28,43,4],[30,40,43,16],[31,6,44,6],[31,10,44,10],[31,11,44,11,"emit"],[31,15,44,15],[31,16,44,16],[31,22,44,22],[31,24,44,24],[31,28,44,28],[31,29,44,29,"_packer"],[31,36,44,36],[31,37,44,37,"packIEND"],[31,45,44,45],[31,46,44,46],[31,47,44,47],[31,48,44,48],[32,6,45,6],[32,10,45,10],[32,11,45,11,"emit"],[32,15,45,15],[32,16,45,16],[32,21,45,21],[32,22,45,22],[33,4,46,4],[33,5,46,5],[33,6,46,6,"bind"],[33,10,46,10],[33,11,46,11],[33,15,46,15],[33,16,47,2],[33,17,47,3],[34,4,49,2],[34,8,49,6],[34,9,49,7,"_deflate"],[34,17,49,15],[34,18,49,16,"end"],[34,21,49,19],[34,22,49,20,"filteredData"],[34,34,49,32],[34,35,49,33],[35,2,50,0],[35,3,50,1],[36,0,50,2],[36,3]],"functionMap":{"names":["<global>","module.exports","PackerAsync.prototype.pack","<anonymous>"],"mappings":"AAA;oCCO;CDS;6BEG;ICgB;KDE;ICK;KDG;CFI"},"hasCjsExports":true},"type":"js/module"}]}