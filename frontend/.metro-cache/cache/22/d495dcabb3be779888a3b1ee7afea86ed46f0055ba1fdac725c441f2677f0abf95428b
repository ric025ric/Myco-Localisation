{"dependencies":[{"name":"../../native/config/PlatformHelper","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":68,"index":68}}],"key":"VAeUL6D5iY8QXYEBY5o7Ew2wCF4=","exportNames":["*"],"imports":1}},{"name":"../../utils/AverageWindow","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":69},"end":{"line":2,"column":58,"index":127}}],"key":"SQ3dfDx/WV1Y1RzFg/JLZPMOTE0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"RenderTimeTracker\", {\n    enumerable: true,\n    get: function () {\n      return RenderTimeTracker;\n    }\n  });\n  var _nativeConfigPlatformHelper = require(_dependencyMap[0], \"../../native/config/PlatformHelper\");\n  var _utilsAverageWindow = require(_dependencyMap[1], \"../../utils/AverageWindow\");\n  class RenderTimeTracker {\n    constructor() {\n      this.renderTimeAvgWindow = new _utilsAverageWindow.AverageWindow(5);\n      this.lastTimerStartedAt = -1;\n      this.maxRenderTime = 32; // TODO: Improve this even more\n      this.defaultRenderTime = 16;\n      this.rendersWithoutCommit = 0;\n      this.maxRendersWithoutCommit = 40;\n    }\n    startTracking() {\n      this.rendersWithoutCommit++;\n      if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return;\n      }\n      if (this.lastTimerStartedAt === -1) {\n        this.lastTimerStartedAt = Date.now();\n      }\n    }\n    markRenderComplete() {\n      this.rendersWithoutCommit = 0;\n      if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return;\n      }\n      if (this.lastTimerStartedAt !== -1) {\n        this.renderTimeAvgWindow.addValue(Date.now() - this.lastTimerStartedAt);\n        this.lastTimerStartedAt = -1;\n      }\n    }\n    hasExceededMaxRendersWithoutCommit() {\n      return this.rendersWithoutCommit >= this.maxRendersWithoutCommit;\n    }\n    getRawValue() {\n      return this.renderTimeAvgWindow.currentValue;\n    }\n    getAverageRenderTime() {\n      if (!_nativeConfigPlatformHelper.PlatformConfig.trackAverageRenderTimeForOffsetProjection) {\n        return this.defaultRenderTime;\n      }\n      return Math.min(this.maxRenderTime, Math.max(Math.round(this.renderTimeAvgWindow.currentValue), 16));\n    }\n  }\n});","lineCount":56,"map":[[7,2,3,0,"Object"],[7,8,3,0],[7,9,3,0,"defineProperty"],[7,23,3,0],[7,24,3,0,"exports"],[7,31,3,0],[8,4,3,0,"enumerable"],[8,14,3,0],[9,4,3,0,"get"],[9,7,3,0],[9,18,3,0,"get"],[9,19,3,0],[10,6,3,0],[10,13,3,0,"RenderTimeTracker"],[10,30,3,0],[11,4,3,0],[12,2,3,0],[13,2,1,0],[13,6,1,0,"_nativeConfigPlatformHelper"],[13,33,1,0],[13,36,1,0,"require"],[13,43,1,0],[13,44,1,0,"_dependencyMap"],[13,58,1,0],[14,2,2,0],[14,6,2,0,"_utilsAverageWindow"],[14,25,2,0],[14,28,2,0,"require"],[14,35,2,0],[14,36,2,0,"_dependencyMap"],[14,50,2,0],[15,2,3,7],[15,8,3,13,"RenderTimeTracker"],[15,25,3,30],[15,26,3,31],[16,4,4,4,"constructor"],[16,15,4,15,"constructor"],[16,16,4,15],[16,18,4,18],[17,6,5,8],[17,10,5,12],[17,11,5,13,"renderTimeAvgWindow"],[17,30,5,32],[17,33,5,35],[17,37,5,39,"AverageWindow"],[17,56,5,52],[17,57,5,52,"AverageWindow"],[17,70,5,52],[17,71,5,53],[17,72,5,54],[17,73,5,55],[18,6,6,8],[18,10,6,12],[18,11,6,13,"lastTimerStartedAt"],[18,29,6,31],[18,32,6,34],[18,33,6,35],[18,34,6,36],[19,6,7,8],[19,10,7,12],[19,11,7,13,"maxRenderTime"],[19,24,7,26],[19,27,7,29],[19,29,7,31],[19,30,7,32],[19,31,7,33],[20,6,8,8],[20,10,8,12],[20,11,8,13,"defaultRenderTime"],[20,28,8,30],[20,31,8,33],[20,33,8,35],[21,6,9,8],[21,10,9,12],[21,11,9,13,"rendersWithoutCommit"],[21,31,9,33],[21,34,9,36],[21,35,9,37],[22,6,10,8],[22,10,10,12],[22,11,10,13,"maxRendersWithoutCommit"],[22,34,10,36],[22,37,10,39],[22,39,10,41],[23,4,11,4],[24,4,12,4,"startTracking"],[24,17,12,17,"startTracking"],[24,18,12,17],[24,20,12,20],[25,6,13,8],[25,10,13,12],[25,11,13,13,"rendersWithoutCommit"],[25,31,13,33],[25,33,13,35],[26,6,14,8],[26,10,14,12],[26,11,14,13,"PlatformConfig"],[26,38,14,27],[26,39,14,27,"PlatformConfig"],[26,53,14,27],[26,54,14,28,"trackAverageRenderTimeForOffsetProjection"],[26,95,14,69],[26,97,14,71],[27,8,15,12],[28,6,16,8],[29,6,17,8],[29,10,17,12],[29,14,17,16],[29,15,17,17,"lastTimerStartedAt"],[29,33,17,35],[29,38,17,40],[29,39,17,41],[29,40,17,42],[29,42,17,44],[30,8,18,12],[30,12,18,16],[30,13,18,17,"lastTimerStartedAt"],[30,31,18,35],[30,34,18,38,"Date"],[30,38,18,42],[30,39,18,43,"now"],[30,42,18,46],[30,43,18,47],[30,44,18,48],[31,6,19,8],[32,4,20,4],[33,4,21,4,"markRenderComplete"],[33,22,21,22,"markRenderComplete"],[33,23,21,22],[33,25,21,25],[34,6,22,8],[34,10,22,12],[34,11,22,13,"rendersWithoutCommit"],[34,31,22,33],[34,34,22,36],[34,35,22,37],[35,6,23,8],[35,10,23,12],[35,11,23,13,"PlatformConfig"],[35,38,23,27],[35,39,23,27,"PlatformConfig"],[35,53,23,27],[35,54,23,28,"trackAverageRenderTimeForOffsetProjection"],[35,95,23,69],[35,97,23,71],[36,8,24,12],[37,6,25,8],[38,6,26,8],[38,10,26,12],[38,14,26,16],[38,15,26,17,"lastTimerStartedAt"],[38,33,26,35],[38,38,26,40],[38,39,26,41],[38,40,26,42],[38,42,26,44],[39,8,27,12],[39,12,27,16],[39,13,27,17,"renderTimeAvgWindow"],[39,32,27,36],[39,33,27,37,"addValue"],[39,41,27,45],[39,42,27,46,"Date"],[39,46,27,50],[39,47,27,51,"now"],[39,50,27,54],[39,51,27,55],[39,52,27,56],[39,55,27,59],[39,59,27,63],[39,60,27,64,"lastTimerStartedAt"],[39,78,27,82],[39,79,27,83],[40,8,28,12],[40,12,28,16],[40,13,28,17,"lastTimerStartedAt"],[40,31,28,35],[40,34,28,38],[40,35,28,39],[40,36,28,40],[41,6,29,8],[42,4,30,4],[43,4,31,4,"hasExceededMaxRendersWithoutCommit"],[43,38,31,38,"hasExceededMaxRendersWithoutCommit"],[43,39,31,38],[43,41,31,41],[44,6,32,8],[44,13,32,15],[44,17,32,19],[44,18,32,20,"rendersWithoutCommit"],[44,38,32,40],[44,42,32,44],[44,46,32,48],[44,47,32,49,"maxRendersWithoutCommit"],[44,70,32,72],[45,4,33,4],[46,4,34,4,"getRawValue"],[46,15,34,15,"getRawValue"],[46,16,34,15],[46,18,34,18],[47,6,35,8],[47,13,35,15],[47,17,35,19],[47,18,35,20,"renderTimeAvgWindow"],[47,37,35,39],[47,38,35,40,"currentValue"],[47,50,35,52],[48,4,36,4],[49,4,37,4,"getAverageRenderTime"],[49,24,37,24,"getAverageRenderTime"],[49,25,37,24],[49,27,37,27],[50,6,38,8],[50,10,38,12],[50,11,38,13,"PlatformConfig"],[50,38,38,27],[50,39,38,27,"PlatformConfig"],[50,53,38,27],[50,54,38,28,"trackAverageRenderTimeForOffsetProjection"],[50,95,38,69],[50,97,38,71],[51,8,39,12],[51,15,39,19],[51,19,39,23],[51,20,39,24,"defaultRenderTime"],[51,37,39,41],[52,6,40,8],[53,6,41,8],[53,13,41,15,"Math"],[53,17,41,19],[53,18,41,20,"min"],[53,21,41,23],[53,22,41,24],[53,26,41,28],[53,27,41,29,"maxRenderTime"],[53,40,41,42],[53,42,41,44,"Math"],[53,46,41,48],[53,47,41,49,"max"],[53,50,41,52],[53,51,41,53,"Math"],[53,55,41,57],[53,56,41,58,"round"],[53,61,41,63],[53,62,41,64],[53,66,41,68],[53,67,41,69,"renderTimeAvgWindow"],[53,86,41,88],[53,87,41,89,"currentValue"],[53,99,41,101],[53,100,41,102],[53,102,41,104],[53,104,41,106],[53,105,41,107],[53,106,41,108],[54,4,42,4],[55,2,43,0],[56,0,43,1],[56,3]],"functionMap":{"names":["<global>","RenderTimeTracker","constructor","startTracking","markRenderComplete","hasExceededMaxRendersWithoutCommit","getRawValue","getAverageRenderTime"],"mappings":"AAA;OCE;ICC;KDO;IEC;KFQ;IGC;KHS;IIC;KJE;IKC;KLE;IMC;KNK;CDC"},"hasCjsExports":false},"type":"js/module"}]}